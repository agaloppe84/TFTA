<div class="container">
  <div class="text-center">
    <h1><%= @foodtruck.name %></h1>

    <p>
      <% if @foodtruck.photos? %>
        <%= cl_image_tag @foodtruck.photos.path, width: 400, height: 300, crop: :fill %>
      <% end %>
    </p>

    <p>address: <%= @foodtruck.address %></p>
    <p>Style culinaire: <%= @foodtruck.culinary_style.title %></p>
    <p>minimum de repas: <%= @foodtruck.min_capacity %></p>
    <p>maximum de repas: <%= @foodtruck.max_capacity %></p>
    <p>max KM gratuits<%= @foodtruck.free_radius_max %></p>
    <p>max Km d√©placement<%= @foodtruck.radius_max %></p>
    <p>prix du KM: <%= @foodtruck.km_price %></p>
    <h5><%= link_to "Commander", "", class: "btn btn-danger" %></h5>
    <hr>
    <h5><%= link_to "Retour", foodtrucks_path, class: "btn btn-primary" %></h5>
    <p><%= link_to "Editer", edit_foodtruck_path, class: "btn btn-primary" %></p>
  </div>

  <hr>

  <div class="text-center">
    <h1>The Menus of <%= @foodtruck.name %></h1>
    <h5><%= link_to "NEW MENU", new_foodtruck_menu_path(@foodtruck), class: "btn btn-primary" %></h5>

    <% @menus.each do |menu| %>
      <li>
        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
          <%= link_to menu.name, foodtruck_menu_path(@foodtruck, menu) %>
        </button>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Menu: <%= menu.name %></h4>
              </div>
              <div class="modal-body">
                Description du menu: <%= menu.description %>
                <br><br>
                <% if menu.photo? %>
                  <%= cl_image_tag menu.photo.path, width: 300, height: 200, crop: :fill %>
                <% end %>
                <% menu.price %>

                <%= simple_form_for @order_line do |f| %>
                  <%= f.input :number_of_meals   %>
                  <%= f.input :menu_id, as: :hidden, input_html: { value: menu.id } %>
                  <%= f.input :reservation_id, as: :hidden, input_html: { value: @reservation.id } %>
                  <%= f.submit "Ajouter au panier" %>
                <% end %>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </li>
    <% end %>

    <br>
    <br>
    COMMANDER

    <%= simple_form_for @reservation do |f| %>
      <%= f.input :shift_datetime %>
      <%= f.input :address %>
      <%= f.button :submit, "Valider ma reservation" %>
    <% end %>
  </div>
</div>
